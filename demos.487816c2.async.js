(self.webpackChunkr_model_store=self.webpackChunkr_model_store||[]).push([[433],{86152:function(u,t,e){"use strict";e.r(t),e.d(t,{default:function(){return M}});var p=e(25298),l=e.n(p),d=e(17069),o=e.n(d),m=e(21742),a=e.n(m),O=e(83136),s=e.n(O),f=e(49900),C=e(75271),n=e(52676),v=function(i){a()(_,i);var c=s()(_);function _(){return l()(this,_),c.call(this,{state:{firstName:"",lastName:""}})}return o()(_,[{key:"updateFirstName",value:function(E){this.setState({firstName:E})}},{key:"updateLastName",value:function(E){this.setState({lastName:E})}}]),_}(f.Model),r=new v;function M(){var i=r.useGetState(),c=i.firstName;return(0,n.jsxs)("main",{style:{color:"#000"},children:[(0,n.jsxs)("label",{children:["First name",(0,n.jsx)("input",{onChange:function(h){return r.updateFirstName(h.currentTarget.value)},value:c})]}),(0,n.jsxs)("p",{children:["Hello, ",(0,n.jsxs)("strong",{children:[c,"!"]})]})]})}},37945:function(u,t,e){"use strict";e.r(t),e.d(t,{default:function(){return M}});var p=e(17069),l=e.n(p),d=e(25298),o=e.n(d),m=e(21742),a=e.n(m),O=e(83136),s=e.n(O),f=e(49900),C=e(75271),n=e(52676),v=function(i){a()(_,i);var c=s()(_);function _(){return o()(this,_),c.call(this,{state:{count:0,countSq:0},computed:[{keys:["count"],handler:function(E){var D=E.count;return{countSq:Math.pow(D,2)}}}]})}return l()(_)}(f.Model),r=new v;function M(){var i=r.useGetState(["count","countSq"]),c=i.count,_=i.countSq;return(0,n.jsxs)("div",{style:{color:"#000"},children:[(0,n.jsx)("button",{type:"button",onClick:function(){return r.setState({count:c+1})},children:"+"}),(0,n.jsx)("button",{type:"button",onClick:function(){return r.setState({count:c-1})},children:"-"}),(0,n.jsxs)("div",{children:["count: ",c]}),(0,n.jsxs)("div",{children:["countSq: ",_]})]})}},81459:function(u,t,e){"use strict";e.r(t);var p=e(82092),l=e.n(p),d=e(25298),o=e.n(d),m=e(17069),a=e.n(m),O=e(21742),s=e.n(O),f=e(83136),C=e.n(f),n=e(49900),v=e(75271),r=e(52676),M=function(R){s()(P,R);var B=C()(P);function P(L){var K;return o()(this,P),K=B.call(this,{state:{fishes:0}}),K.store=L,K}return a()(P,[{key:"addFish",value:function(){this.setState({fishes:this.getState().fishes+1})}},{key:"eatFish",value:function(){this.setState({fishes:this.getState().fishes-1})}}]),P}(n.Model),i=function(R){s()(P,R);var B=C()(P);function P(L){var K;return o()(this,P),K=B.call(this,{state:{bears:0}}),K.store=L,K}return a()(P,[{key:"addBear",value:function(){this.setState({bears:this.getState().bears+1})}}]),P}(n.Model),c=a()(function R(){o()(this,R),l()(this,"fishStore",void 0),l()(this,"bearStore",void 0),this.fishStore=new M(this),this.bearStore=new i(this)}),_=new c,h=function(){var B=_.bearStore.useGetState(),P=B.bears;return(0,r.jsxs)("div",{children:[(0,r.jsxs)("h2",{children:["Number of bears: ",P]}),(0,r.jsx)("button",{type:"button",onClick:function(){return _.bearStore.addBear()},children:"Add Bear"})]})},E=function(){var B=_.fishStore.useGetState(),P=B.fishes;return(0,r.jsxs)("div",{children:[(0,r.jsxs)("h2",{children:["Number of fishes: ",P]}),(0,r.jsx)("button",{type:"button",onClick:function(){return _.fishStore.addFish()},children:"Add Fish"})]})};function D(){return(0,r.jsxs)("div",{style:{color:"#000"},children:[(0,r.jsx)(h,{}),(0,r.jsx)(E,{})]})}t.default=D},56626:function(u,t,e){"use strict";e.r(t),e.d(t,{default:function(){return M}});var p=e(25298),l=e.n(p),d=e(17069),o=e.n(d),m=e(21742),a=e.n(m),O=e(83136),s=e.n(O),f=e(49900),C=e(75271),n=e(52676),v=function(i){a()(_,i);var c=s()(_);function _(){return l()(this,_),c.call(this,{state:{firstName:"",lastName:""}})}return o()(_,[{key:"updateFirstName",value:function(E){this.setState({firstName:E})}},{key:"updateLastName",value:function(E){this.setState({lastName:E})}}]),_}(f.Model),r=new v;function M(){var i=r.useGetState(["firstName","lastName"]),c=i.firstName;return(0,n.jsxs)("main",{style:{color:"#000"},children:[(0,n.jsxs)("label",{children:["First name",(0,n.jsx)("input",{onChange:function(h){return r.updateFirstName(h.currentTarget.value)},value:c})]}),(0,n.jsxs)("p",{children:["Hello, ",(0,n.jsxs)("strong",{children:[c,"!"]})]})]})}},49781:function(u,t,e){"use strict";e.r(t);var p=e(25298),l=e.n(p),d=e(17069),o=e.n(d),m=e(21742),a=e.n(m),O=e(83136),s=e.n(O),f=e(49900),C=e(15361),n=e(75271),v=e(52676),r=function(i){a()(_,i);var c=s()(_);function _(){return l()(this,_),c.call(this,{state:{value:""}})}return o()(_,[{key:"changeValue",value:function(E){this.setState({value:E})}}]),_}(f.Model),M=function(){var c=(0,C.useCreation)(function(){return new r},[]),_=c.useGetState(),h=_.value;return(0,v.jsxs)("div",{style:{color:"#000"},children:["userName:",(0,v.jsx)("input",{value:h,onInput:function(D){c.changeValue(D.target.value)}}),(0,v.jsxs)("div",{children:["userName: ",h]})]})};t.default=M},6952:function(u,t,e){"use strict";e.r(t),e.d(t,{CheckBoxGroupContext:function(){return g},CheckBoxGroupModel:function(){return x},useCheckBoxGroup:function(){return $}});var p=e(48305),l=e.n(p),d=e(26068),o=e.n(d),m=e(67825),a=e.n(m),O=e(15558),s=e.n(O),f=e(25298),C=e.n(f),n=e(17069),v=e.n(n),r=e(62657),M=e.n(r),i=e(21742),c=e.n(i),_=e(83136),h=e.n(_),E=e(82092),D=e.n(E),R=e(58899),B=e(49900),P=e(15361),L=e(80189),K=e(75271),j=e(52676),U=["value"],x=function(k){c()(I,k);var S=h()(I);function I(){var A;return C()(this,I),A=S.call(this,{autoInit:!1,state:{value:[],valueMap:{},keys:[],isCheckAll:!1,indeterminate:!1},computed:[{keys:["value"],handler:function(T){var W=T.value;return{valueMap:(0,L.arrayToObj)(W,void 0,function(){return!0})}}},{keys:["value","keys"],handler:function(T){var W=T.valueMap;return A.getCheckAllInfo(W)}}]}),D()(M()(A),"keys",[]),D()(M()(A),"timer",void 0),D()(M()(A),"props",{}),A.init(),A}return v()(I,[{key:"getCheckAllInfo",value:function(b){var T=this.getState(),W=T.valueMap,F=b||W,G=this.keys,N=!1,Z=!0;return G.forEach(function(V){var H=F[V];return H?N=!0:Z=!1,H}),Z&&(N=!1),{isCheckAll:Z,indeterminate:N}}},{key:"handleToggleCheckAll",value:function(){var b,T,W=this.getState(),F=W.isCheckAll,G;F?G=[]:G=s()(this.keys),"value"in this.props||this.setState({value:G}),(b=(T=this.props).onChange)===null||b===void 0||b.call(T,G)}},{key:"handleToggleCheck",value:function(b){var T,W,F=this.getState(),G=F.valueMap,N=F.value,Z=G[b],V=s()(N);Z?V=V.filter(function(H){return H!==b}):V.push(b),"value"in this.props||this.setState({value:V}),(T=(W=this.props).onChange)===null||T===void 0||T.call(W,V)}},{key:"registerKey",value:function(b){this.keys.includes(b)||this.keys.push(b),this.__updateKeys()}},{key:"setKeys",value:function(b){this.keys=b,this.__updateKeys()}},{key:"unRegisterKey",value:function(b){this.keys=this.keys.filter(function(T){return T!==b}),this.__updateKeys()}},{key:"__updateKeys",value:function(){var b=this;clearTimeout(this.timer),this.timer=setTimeout(function(){b.setState({keys:s()(b.keys)})},10)}}]),I}(B.Model);function $(k){var S="value"in k,I=(0,P.useCreation)(function(){return new x},[]);return I.props=k,(0,K.useMemo)(function(){S&&I.setState({value:k.value||[]},{silent:!0})},[k.value,I,S]),I}var g=(0,K.createContext)({model:new x,useGroupKeys:!1}),y=function(S){var I=$(S),A="keys"in S;return(0,K.useEffect)(function(){A&&I.setKeys(S.keys||[])},[S.keys,I,A]),(0,j.jsx)(g.Provider,{value:{model:I,useGroupKeys:A},children:S.children})},z=function(S){var I=S.value,A=a()(S,U),b=(0,K.useContext)(g),T=b.model,W=b.useGroupKeys,F=T.useGetState(),G=F.valueMap,N=G[I];return(0,K.useMemo)(function(){return W||T.registerKey(I),function(){W||T.unRegisterKey(I)}},[T,I,W]),(0,j.jsx)(R.Z,o()(o()({},A),{},{checked:N,onChange:function(){T.handleToggleCheck(I)}}))},X=function(S){var I=(0,K.useContext)(g),A=I.model,b=A.useGetState(),T=b.isCheckAll,W=b.indeterminate;return(0,j.jsx)(R.Z,o()(o()({},S),{},{checked:T,indeterminate:W,onChange:function(){A.handleToggleCheckAll()}}))};y.Checkbox=z,y.CheckboxAll=X,t.default=function(){var k=K.useState([]),S=l()(k,2),I=S[0],A=S[1];return(0,j.jsxs)("div",{style:{color:"#000"},children:[(0,j.jsxs)("div",{children:["\u9009\u4E2D\u7684\u503C\uFF1A",I.map(function(b){return(0,j.jsxs)("span",{children:[String(b),","]},String(b))})]}),(0,j.jsx)(y,{onChange:function(T){A(T),console.log(T)},children:(0,j.jsxs)("ul",{children:[(0,j.jsx)("li",{children:(0,j.jsx)(y.Checkbox,{style:{color:"#000"},value:"apple",children:"Apple"})}),(0,j.jsx)("li",{children:(0,j.jsx)(y.Checkbox,{style:{color:"#000"},value:"banana",children:"Banana"})}),(0,j.jsx)("li",{children:(0,j.jsx)(y.Checkbox,{style:{color:"#000"},value:"orange",children:"Orange"})}),(0,j.jsx)("li",{children:(0,j.jsx)(y.Checkbox,{style:{color:"#000"},value:"pear",children:"Pear"})})]})})]})}},35549:function(u,t,e){"use strict";e.r(t);var p=e(49900),l=e(75271),d=e(52676),o=function(){var a=(0,p.useModel)({state:{value:""},effects:{changeValue:function(C){a.setState({value:C})}}}),O=a.useGetState(),s=O.value;return(0,d.jsxs)("div",{style:{color:"#000"},children:["userName:",(0,d.jsx)("input",{value:s,onInput:function(C){a.getEffect("changeValue")(C.target.value)}}),(0,d.jsxs)("div",{children:["userName: ",s]})]})};t.default=o},90544:function(u,t,e){"use strict";e.r(t);var p=e(48305),l=e.n(p),d=e(49900),o=e(75271),m=e(52676),a=function(s){var f="value"in s,C=(0,d.useModel)({state:{value:""},effects:{changeValue:function(M){var i;f||C.setState({value:M}),(i=s.onChange)===null||i===void 0||i.call(s,M)}}});(0,o.useMemo)(function(){f&&C.setState({value:s.value},{silent:!0})},[s.value]);var n=C.useGetState(),v=n.value;return(0,m.jsx)("input",{value:v,onInput:function(M){C.getEffect("changeValue")(M.target.value)}})};t.default=function(){var O=o.useState(""),s=l()(O,2),f=s[0],C=s[1];return(0,m.jsxs)("div",{style:{color:"#000"},children:[(0,m.jsxs)("div",{children:["\u53D7\u63A7\u7EC4\u4EF6\uFF1A",(0,m.jsx)(a,{value:f,onChange:function(v){return C(v)}})]}),(0,m.jsxs)("div",{children:["\u975E\u53D7\u63A7\u7EC4\u4EF6\uFF1A",(0,m.jsx)(a,{})]})]})}},53312:function(u,t,e){"use strict";e.r(t),e.d(t,{default:function(){return n}});var p=e(90228),l=e.n(p),d=e(87999),o=e.n(d),m=e(48305),a=e.n(m),O=e(71676),s=e(75271),f=e(52676);function C(v){return new Promise(function(r){setTimeout(function(){r("result for ".concat(v))},Math.random()>.5?1e3:3e3)})}function n(){var v=s.useState(""),r=a()(v,2),M=r[0],i=r[1],c=s.useState(""),_=a()(c,2),h=_[0],E=_[1],D=s.useState(!1),R=a()(D,2),B=R[0],P=R[1],L=(0,O.Z)(function(){var j=o()(l()().mark(function U(x){var $;return l()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return P(!0),y.next=3,C(x);case 3:$=y.sent,E($),P(!1);case 6:case"end":return y.stop()}},U)}));return function(U){return j.apply(this,arguments)}}(),{wait:300}),K=L.run;return(0,s.useEffect)(function(){M&&K(M)},[M]),(0,f.jsxs)("div",{style:{color:"#000"},children:[(0,f.jsx)("input",{value:M,onChange:function(U){return i(U.target.value)}}),(0,f.jsx)("div",{children:B?"loading...":h})]})}},11470:function(u,t,e){"use strict";e.r(t),e.d(t,{default:function(){return C}});var p=e(90228),l=e.n(p),d=e(87999),o=e.n(d),m=e(49900),a=e(71676),O=e(75271),s=e(52676);function f(n,v){var r=0;return v&&(v.signal.onabort=function(){clearTimeout(r)}),new Promise(function(M){r=setTimeout(function(){M("result for ".concat(n))},Math.random()>.5?1e3:3e3)})}function C(){var n=(0,m.useModel)({state:{keyword:"",result:"",loading:!1},effects:{handleSearch:function(){var h=o()(l()().mark(function D(R){return l()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:n.asyncManager("fetchSearch",{loadingKey:"loading"}).exec(function(){var L=o()(l()().mark(function K(j){var U,x,$;return l()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return U=j.lastAbortController,x=j.abortController,U&&(console.log("abort last request"),U.abort()),y.next=4,f(R,x);case 4:return $=y.sent,y.abrupt("return",{result:$});case 6:case"end":return y.stop()}},K)}));return function(K){return L.apply(this,arguments)}}()).catch(function(){});case 1:case"end":return P.stop()}},D)}));function E(D){return h.apply(this,arguments)}return E}()}}),v=n.useGetState(),r=v.keyword,M=v.result,i=v.loading,c=(0,a.Z)(function(){var h=o()(l()().mark(function E(D){return l()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.abrupt("return",n.getEffect("handleSearch")(D));case 1:case"end":return B.stop()}},E)}));return function(E){return h.apply(this,arguments)}}(),{wait:300}),_=c.run;return(0,O.useEffect)(function(){r&&_(r)},[r]),(0,s.jsxs)("div",{style:{color:"#000"},children:[(0,s.jsx)("input",{value:r,onChange:function(E){return n.setState({keyword:E.target.value})}}),(0,s.jsx)("div",{children:i?"loading...":M})]})}},27482:function(u,t,e){"use strict";e.r(t);var p=e(25298),l=e.n(p),d=e(17069),o=e.n(d),m=e(21742),a=e.n(m),O=e(83136),s=e.n(O),f=e(49900),C=e(47551),n=e(53874),v=e(75271),r=e(52676),M=function(i){a()(_,i);var c=s()(_);function _(){return l()(this,_),c.call(this,{state:{todos:[]}})}return o()(_,[{key:"addTodo",value:function(){this.setState((0,n.produce)(this.getState(),function(E){E.todos.push({id:Math.random().toString(36).slice(2),text:"new todo"})}))}},{key:"removeTodo",value:function(E){this.setState((0,n.produce)(this.getState(),function(D){D.todos=D.todos.filter(function(R){return R.id!==E})}))}},{key:"editTodo",value:function(E,D){this.setState((0,n.produce)(this.getState(),function(R){var B=R.todos.find(function(P){return P.id===E});B&&(B.text=D)}))}}]),_}(f.Model);t.default=function(){var i=(0,C.Z)(function(){return new M},[]),c=i.useGetState(),_=c.todos;return(0,r.jsxs)("div",{style:{color:"#000"},children:[(0,r.jsx)("button",{type:"button",onClick:function(){return i.addTodo()},children:"add todo"}),_.map(function(h){return(0,r.jsxs)("div",{children:[(0,r.jsx)("input",{value:h.text,onInput:function(D){i.editTodo(h.id,D.target.value)}}),(0,r.jsx)("button",{type:"button",onClick:function(){return i.removeTodo(h.id)},children:"remove"})]},h.id)})]})}},81919:function(u,t,e){"use strict";e.r(t);var p=e(90228),l=e.n(p),d=e(87999),o=e.n(d),m=e(48305),a=e.n(m),O=e(49900),s=e(75271),f=e(52676);function C(n){return new Promise(function(v,r){setTimeout(function(){n?v("success"):r(new Error("fail"))},1e3)})}t.default=function(){var n=s.useState(0),v=a()(n,2),r=v[0],M=v[1],i=(0,O.useModel)({state:{loading:!1,result:"",error:null},effects:{fetch:function(){var E=o()(l()().mark(function R(){return l()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:i.asyncManager("fetch",{loadingKey:"loading",errorKey:"error",config:{retryCount:3}}).exec(function(){var L=o()(l()().mark(function K(j,U){var x;return l()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return M(U),g.next=3,C(U===3);case 3:return x=g.sent,g.abrupt("return",{result:x});case 5:case"end":return g.stop()}},K)}));return function(K,j){return L.apply(this,arguments)}}());case 1:case"end":return P.stop()}},R)}));function D(){return E.apply(this,arguments)}return D}()}}),c=i.useGetState(),_=c.loading,h=c.result;return(0,f.jsxs)("div",{style:{color:"#000"},children:[(0,f.jsx)("button",{type:"button",onClick:function(){return i.getEffect("fetch")()},children:"fetch"}),(0,f.jsxs)("div",{children:["loading: ",_?"loading":"loaded"]}),(0,f.jsxs)("div",{children:["result: ",h]}),(0,f.jsxs)("div",{children:["tryCount: ",r]})]})}},38498:function(u,t,e){var p=e(78770);function l(d){if(Array.isArray(d))return p(d)}u.exports=l,u.exports.__esModule=!0,u.exports.default=u.exports},20698:function(u){function t(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}u.exports=t,u.exports.__esModule=!0,u.exports.default=u.exports},91162:function(u){function t(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}u.exports=t,u.exports.__esModule=!0,u.exports.default=u.exports},67825:function(u,t,e){var p=e(64382);function l(d,o){if(d==null)return{};var m=p(d,o),a,O;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(d);for(O=0;O<s.length;O++)a=s[O],!(o.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(d,a)&&(m[a]=d[a])}return m}u.exports=l,u.exports.__esModule=!0,u.exports.default=u.exports},64382:function(u){function t(e,p){if(e==null)return{};var l={},d=Object.keys(e),o,m;for(m=0;m<d.length;m++)o=d[m],!(p.indexOf(o)>=0)&&(l[o]=e[o]);return l}u.exports=t,u.exports.__esModule=!0,u.exports.default=u.exports},15558:function(u,t,e){var p=e(38498),l=e(20698),d=e(31479),o=e(91162);function m(a){return p(a)||l(a)||d(a)||o()}u.exports=m,u.exports.__esModule=!0,u.exports.default=u.exports}}]);
