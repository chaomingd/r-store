(self.webpackChunkr_model_store=self.webpackChunkr_model_store||[]).push([[433],{78010:function(l,o,e){"use strict";e.r(o),e.d(o,{default:function(){return M}});var p=e(25298),a=e.n(p),i=e(17069),s=e.n(i),h=e(21742),d=e.n(h),O=e(83136),u=e.n(O),v=e(49900),j=e(75271),_=e(52676),c=function(E){d()(t,E);var f=u()(t);function t(){return a()(this,t),f.call(this,{state:{firstName:"",lastName:""}})}return s()(t,[{key:"updateFirstName",value:function(n){this.setState({firstName:n})}},{key:"updateLastName",value:function(n){this.setState({lastName:n})}}]),t}(v.Model),r=new c;function M(){var E=r.useGetState(),f=E.firstName;return(0,_.jsxs)("main",{children:[(0,_.jsxs)("label",{children:["First name",(0,_.jsx)("input",{onChange:function(m){return r.updateFirstName(m.currentTarget.value)},value:f})]}),(0,_.jsxs)("p",{children:["Hello, ",(0,_.jsxs)("strong",{children:[f,"!"]})]})]})}},9849:function(l,o,e){"use strict";e.r(o),e.d(o,{default:function(){return M}});var p=e(17069),a=e.n(p),i=e(25298),s=e.n(i),h=e(21742),d=e.n(h),O=e(83136),u=e.n(O),v=e(49900),j=e(75271),_=e(52676),c=function(E){d()(t,E);var f=u()(t);function t(){return s()(this,t),f.call(this,{state:{count:0,countSq:0},computed:[{keys:["count"],handler:function(n){var D=n.count;return{countSq:Math.pow(D,2)}}}]})}return a()(t)}(v.Model),r=new c;function M(){var E=r.useGetState(["count","countSq"]),f=E.count,t=E.countSq;return(0,_.jsxs)("div",{children:[(0,_.jsx)("button",{type:"button",onClick:function(){return r.setState({count:f+1})},children:"+"}),(0,_.jsx)("button",{type:"button",onClick:function(){return r.setState({count:f-1})},children:"-"}),(0,_.jsxs)("div",{children:["count: ",f]}),(0,_.jsxs)("div",{children:["countSq: ",t]})]})}},1221:function(l,o,e){"use strict";e.r(o);var p=e(82092),a=e.n(p),i=e(25298),s=e.n(i),h=e(17069),d=e.n(h),O=e(21742),u=e.n(O),v=e(83136),j=e.n(v),_=e(49900),c=e(75271),r=e(52676),M=function(P){u()(C,P);var B=j()(C);function C(W){var R;return s()(this,C),R=B.call(this,{state:{fishes:0}}),R.store=W,R}return d()(C,[{key:"addFish",value:function(){this.setState({fishes:this.getState().fishes+1})}},{key:"eatFish",value:function(){this.setState({fishes:this.getState().fishes-1})}}]),C}(_.Model),E=function(P){u()(C,P);var B=j()(C);function C(W){var R;return s()(this,C),R=B.call(this,{state:{bears:0}}),R.store=W,R}return d()(C,[{key:"addBear",value:function(){this.setState({bears:this.getState().bears+1})}}]),C}(_.Model),f=d()(function P(){s()(this,P),a()(this,"fishStore",void 0),a()(this,"bearStore",void 0),this.fishStore=new M(this),this.bearStore=new E(this)}),t=new f,m=function(){var B=t.bearStore.useGetState(),C=B.bears;return(0,r.jsxs)("div",{children:[(0,r.jsxs)("h2",{children:["Number of bears: ",C]}),(0,r.jsx)("button",{type:"button",onClick:function(){return t.bearStore.addBear()},children:"Add Bear"})]})},n=function(){var B=t.fishStore.useGetState(),C=B.fishes;return(0,r.jsxs)("div",{children:[(0,r.jsxs)("h2",{children:["Number of fishes: ",C]}),(0,r.jsx)("button",{type:"button",onClick:function(){return t.fishStore.addFish()},children:"Add Fish"})]})};function D(){return(0,r.jsxs)("div",{children:[(0,r.jsx)(m,{}),(0,r.jsx)(n,{})]})}o.default=D},73204:function(l,o,e){"use strict";e.r(o),e.d(o,{default:function(){return f}});var p=e(25298),a=e.n(p),i=e(17069),s=e.n(i),h=e(21742),d=e.n(h),O=e(83136),u=e.n(O),v=e(49900),j=e(75271),_=e(52676),c=function(t){d()(n,t);var m=u()(n);function n(){return a()(this,n),m.call(this,{state:{firstName:"",lastName:""}})}return s()(n,[{key:"updateFirstName",value:function(P){this.setState({firstName:P})}},{key:"updateLastName",value:function(P){this.setState({lastName:P})}}]),n}(v.Model),r=new c,M=function(){var m=r.useGetState(["firstName"]),n=m.firstName;return console.log("render firstName",n),(0,_.jsxs)("div",{children:[(0,_.jsxs)("label",{children:["First name",(0,_.jsx)("input",{onChange:function(P){return r.updateFirstName(P.currentTarget.value)},value:n})]}),(0,_.jsxs)("p",{children:["Hello, ",(0,_.jsxs)("strong",{children:[n,"!"]})]})]})},E=function(){var m=r.useGetState(["lastName"]),n=m.lastName;return console.log("render lastName",n),(0,_.jsxs)("div",{children:[(0,_.jsxs)("label",{children:["Last name",(0,_.jsx)("input",{onChange:function(P){return r.updateLastName(P.currentTarget.value)},value:n})]}),(0,_.jsxs)("p",{children:["Hello, ",(0,_.jsxs)("strong",{children:[n,"!"]})]})]})};function f(){return(0,_.jsxs)("main",{children:[(0,_.jsx)(M,{}),(0,_.jsx)(E,{})]})}},70209:function(l,o,e){"use strict";e.r(o);var p=e(25298),a=e.n(p),i=e(17069),s=e.n(i),h=e(21742),d=e.n(h),O=e(83136),u=e.n(O),v=e(49900),j=e(15361),_=e(75271),c=e(52676),r=function(E){d()(t,E);var f=u()(t);function t(){return a()(this,t),f.call(this,{state:{value:""}})}return s()(t,[{key:"changeValue",value:function(n){this.setState({value:n})}}]),t}(v.Model),M=function(){var f=(0,j.useCreation)(function(){return new r},[]),t=f.useGetState(),m=t.value;return(0,c.jsxs)("div",{children:["userName:",(0,c.jsx)("input",{value:m,onInput:function(D){f.changeValue(D.target.value)}}),(0,c.jsxs)("div",{children:["userName: ",m]})]})};o.default=M},37998:function(l,o,e){"use strict";e.r(o),e.d(o,{CheckBoxGroupContext:function(){return g},CheckBoxGroupModel:function(){return x},useCheckBoxGroup:function(){return $}});var p=e(48305),a=e.n(p),i=e(26068),s=e.n(i),h=e(67825),d=e.n(h),O=e(15558),u=e.n(O),v=e(25298),j=e.n(v),_=e(17069),c=e.n(_),r=e(62657),M=e.n(r),E=e(21742),f=e.n(E),t=e(83136),m=e.n(t),n=e(82092),D=e.n(n),P=e(58899),B=e(49900),C=e(15361),W=e(80189),R=e(75271),T=e(52676),y=["value"],x=function(k){f()(K,k);var L=m()(K);function K(){var I;return j()(this,K),I=L.call(this,{state:{value:[],valueMap:{},keys:[],isCheckAll:!1,indeterminate:!1},computed:[{keys:["value"],handler:function(A){var U=A.value;return{valueMap:(0,W.arrayToObj)(U,void 0,function(){return!0})}}},{keys:["value","keys"],handler:function(A){var U=A.valueMap;return I.getCheckAllInfo(U)}}]}),D()(M()(I),"keys",[]),D()(M()(I),"timer",void 0),D()(M()(I),"props",{}),I}return c()(K,[{key:"getCheckAllInfo",value:function(b){var A=this.getState(),U=A.valueMap,N=b||U,G=this.keys,F=!1,H=!0;return G.forEach(function(V){var Z=N[V];return Z?F=!0:H=!1,Z}),H&&(F=!1),{isCheckAll:H,indeterminate:F}}},{key:"handleToggleCheckAll",value:function(){var b,A,U=this.getState(),N=U.isCheckAll,G;N?G=[]:G=u()(this.keys),"value"in this.props||this.setState({value:G}),(b=(A=this.props).onChange)===null||b===void 0||b.call(A,G)}},{key:"handleToggleCheck",value:function(b){var A,U,N=this.getState(),G=N.valueMap,F=N.value,H=G[b],V=u()(F);H?V=V.filter(function(Z){return Z!==b}):V.push(b),"value"in this.props||this.setState({value:V}),(A=(U=this.props).onChange)===null||A===void 0||A.call(U,V)}},{key:"registerKey",value:function(b){this.keys.includes(b)||this.keys.push(b),this.__updateKeys()}},{key:"setKeys",value:function(b){this.keys=b,this.__updateKeys()}},{key:"unRegisterKey",value:function(b){this.keys=this.keys.filter(function(A){return A!==b}),this.__updateKeys()}},{key:"__updateKeys",value:function(){var b=this;clearTimeout(this.timer),this.timer=setTimeout(function(){b.setState({keys:u()(b.keys)})},10)}}]),K}(B.Model);function $(k){var L="value"in k,K=(0,C.useCreation)(function(){return new x},[]);return K.props=k,(0,R.useMemo)(function(){L&&K.setState({value:k.value||[]},{silent:!0})},[k.value,K,L]),K}var g=(0,R.createContext)({model:new x,useGroupKeys:!1}),S=function(L){var K=$(L),I="keys"in L;return(0,R.useEffect)(function(){I&&K.setKeys(L.keys||[])},[L.keys,K,I]),(0,T.jsx)(g.Provider,{value:{model:K,useGroupKeys:I},children:L.children})},z=function(L){var K=L.value,I=d()(L,y),b=(0,R.useContext)(g),A=b.model,U=b.useGroupKeys,N=A.useGetState(),G=N.valueMap,F=G[K];return(0,R.useMemo)(function(){return U||A.registerKey(K),function(){U||A.unRegisterKey(K)}},[A,K,U]),(0,T.jsx)(P.Z,s()(s()({},I),{},{checked:F,onChange:function(){A.handleToggleCheck(K)}}))},X=function(L){var K=(0,R.useContext)(g),I=K.model,b=I.useGetState(),A=b.isCheckAll,U=b.indeterminate;return(0,T.jsx)(P.Z,s()(s()({},L),{},{checked:A,indeterminate:U,onChange:function(){I.handleToggleCheckAll()}}))};S.Checkbox=z,S.CheckboxAll=X,o.default=function(){var k=R.useState([]),L=a()(k,2),K=L[0],I=L[1];return(0,T.jsxs)("div",{children:[(0,T.jsxs)("div",{children:["\u9009\u4E2D\u7684\u503C\uFF1A",K.map(function(b){return(0,T.jsxs)("span",{children:[String(b),","]},String(b))})]}),(0,T.jsx)(S,{onChange:function(A){I(A),console.log(A)},children:(0,T.jsxs)("ul",{children:[(0,T.jsx)("li",{children:(0,T.jsx)(S.Checkbox,{style:{color:"#000"},value:"apple",children:"Apple"})}),(0,T.jsx)("li",{children:(0,T.jsx)(S.Checkbox,{style:{color:"#000"},value:"banana",children:"Banana"})}),(0,T.jsx)("li",{children:(0,T.jsx)(S.Checkbox,{style:{color:"#000"},value:"orange",children:"Orange"})}),(0,T.jsx)("li",{children:(0,T.jsx)(S.Checkbox,{style:{color:"#000"},value:"pear",children:"Pear"})})]})})]})}},55182:function(l,o,e){"use strict";e.r(o);var p=e(49900),a=e(75271),i=e(52676),s=function(){var d=(0,p.useModel)({state:{value:""},effects:{changeValue:function(j){d.setState({value:j})}}}),O=d.useGetState(),u=O.value;return(0,i.jsxs)("div",{children:["userName:",(0,i.jsx)("input",{value:u,onInput:function(j){d.getEffect("changeValue")(j.target.value)}}),(0,i.jsxs)("div",{children:["userName: ",u]})]})};o.default=s},12482:function(l,o,e){"use strict";e.r(o);var p=e(48305),a=e.n(p),i=e(49900),s=e(75271),h=e(52676),d=function(u){var v="value"in u,j=(0,i.useModel)({state:{value:""},effects:{changeValue:function(M){var E;v||j.setState({value:M}),(E=u.onChange)===null||E===void 0||E.call(u,M)}}});(0,s.useMemo)(function(){v&&j.setState({value:u.value},{silent:!0})},[u.value]);var _=j.useGetState(),c=_.value;return(0,h.jsx)("input",{value:c,onInput:function(M){j.getEffect("changeValue")(M.target.value)}})};o.default=function(){var O=s.useState(""),u=a()(O,2),v=u[0],j=u[1];return(0,h.jsxs)("div",{children:[(0,h.jsxs)("div",{children:["\u53D7\u63A7\u7EC4\u4EF6\uFF1A",(0,h.jsx)(d,{value:v,onChange:function(c){return j(c)}})]}),(0,h.jsxs)("div",{children:["\u975E\u53D7\u63A7\u7EC4\u4EF6\uFF1A",(0,h.jsx)(d,{})]})]})}},58815:function(l,o,e){"use strict";e.r(o),e.d(o,{default:function(){return _}});var p=e(90228),a=e.n(p),i=e(87999),s=e.n(i),h=e(48305),d=e.n(h),O=e(71676),u=e(75271),v=e(52676);function j(c){return new Promise(function(r){setTimeout(function(){r("result for ".concat(c))},Math.random()>.5?1e3:3e3)})}function _(){var c=u.useState(""),r=d()(c,2),M=r[0],E=r[1],f=u.useState(""),t=d()(f,2),m=t[0],n=t[1],D=u.useState(!1),P=d()(D,2),B=P[0],C=P[1],W=(0,O.Z)(function(){var T=s()(a()().mark(function y(x){var $;return a()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return C(!0),S.next=3,j(x);case 3:$=S.sent,n($),C(!1);case 6:case"end":return S.stop()}},y)}));return function(y){return T.apply(this,arguments)}}(),{wait:300}),R=W.run;return(0,u.useEffect)(function(){M&&R(M)},[M]),(0,v.jsxs)("div",{children:[(0,v.jsx)("input",{value:M,onChange:function(y){return E(y.target.value)}}),(0,v.jsx)("div",{children:B?"loading...":m})]})}},79347:function(l,o,e){"use strict";e.r(o),e.d(o,{default:function(){return j}});var p=e(90228),a=e.n(p),i=e(87999),s=e.n(i),h=e(49900),d=e(71676),O=e(75271),u=e(52676);function v(_,c){var r=0;return c&&(c.signal.onabort=function(){clearTimeout(r)}),new Promise(function(M){r=setTimeout(function(){M("result for ".concat(_))},Math.random()>.5?1e3:3e3)})}function j(){var _=(0,h.useModel)({state:{keyword:"",result:"",loading:!1},effects:{handleSearch:function(){var m=s()(a()().mark(function D(P){return a()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:_.asyncManager("fetchSearch",{loadingKey:"loading"}).exec(function(){var W=s()(a()().mark(function R(T){var y,x,$;return a()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return y=T.lastAbortController,x=T.abortController,y&&(console.log("abort last request"),y.abort()),S.next=4,v(P,x);case 4:return $=S.sent,S.abrupt("return",{result:$});case 6:case"end":return S.stop()}},R)}));return function(R){return W.apply(this,arguments)}}()).catch(function(){});case 1:case"end":return C.stop()}},D)}));function n(D){return m.apply(this,arguments)}return n}()}}),c=_.useGetState(),r=c.keyword,M=c.result,E=c.loading,f=(0,d.Z)(function(){var m=s()(a()().mark(function n(D){return a()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.abrupt("return",_.getEffect("handleSearch")(D));case 1:case"end":return B.stop()}},n)}));return function(n){return m.apply(this,arguments)}}(),{wait:300}),t=f.run;return(0,O.useEffect)(function(){r&&t(r)},[r]),(0,u.jsxs)("div",{children:[(0,u.jsx)("input",{value:r,onChange:function(n){return _.setState({keyword:n.target.value})}}),(0,u.jsx)("div",{children:E?"loading...":M})]})}},6242:function(l,o,e){"use strict";e.r(o);var p=e(25298),a=e.n(p),i=e(17069),s=e.n(i),h=e(21742),d=e.n(h),O=e(83136),u=e.n(O),v=e(49900),j=e(47551),_=e(53874),c=e(75271),r=e(52676),M=function(E){d()(t,E);var f=u()(t);function t(){return a()(this,t),f.call(this,{state:{todos:[]}})}return s()(t,[{key:"addTodo",value:function(){this.setState((0,_.produce)(this.getState(),function(n){n.todos.push({id:Math.random().toString(36).slice(2),text:"new todo"})}))}},{key:"removeTodo",value:function(n){this.setState((0,_.produce)(this.getState(),function(D){D.todos=D.todos.filter(function(P){return P.id!==n})}))}},{key:"editTodo",value:function(n,D){this.setState((0,_.produce)(this.getState(),function(P){var B=P.todos.find(function(C){return C.id===n});B&&(B.text=D)}))}}]),t}(v.Model);o.default=function(){var E=(0,j.Z)(function(){return new M},[]),f=E.useGetState(),t=f.todos;return(0,r.jsxs)("div",{children:[(0,r.jsx)("button",{type:"button",onClick:function(){return E.addTodo()},children:"add todo"}),t.map(function(m){return(0,r.jsxs)("div",{children:[(0,r.jsx)("input",{value:m.text,onInput:function(D){E.editTodo(m.id,D.target.value)}}),(0,r.jsx)("button",{type:"button",onClick:function(){return E.removeTodo(m.id)},children:"remove"})]},m.id)})]})}},63898:function(l,o,e){"use strict";e.r(o);var p=e(90228),a=e.n(p),i=e(87999),s=e.n(i),h=e(48305),d=e.n(h),O=e(49900),u=e(75271),v=e(52676);function j(_){return new Promise(function(c,r){setTimeout(function(){_?c("success"):r(new Error("fail"))},1e3)})}o.default=function(){var _=u.useState(0),c=d()(_,2),r=c[0],M=c[1],E=(0,O.useModel)({state:{loading:!1,result:"",error:null},effects:{fetch:function(){var n=s()(a()().mark(function P(){return a()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:E.asyncManager("fetch",{loadingKey:"loading",errorKey:"error",config:{retryCount:3}}).exec(function(){var W=s()(a()().mark(function R(T,y){var x;return a()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return M(y),g.next=3,j(y===3);case 3:return x=g.sent,g.abrupt("return",{result:x});case 5:case"end":return g.stop()}},R)}));return function(R,T){return W.apply(this,arguments)}}());case 1:case"end":return C.stop()}},P)}));function D(){return n.apply(this,arguments)}return D}()}}),f=E.useGetState(),t=f.loading,m=f.result;return(0,v.jsxs)("div",{children:[(0,v.jsx)("button",{type:"button",onClick:function(){return E.getEffect("fetch")()},children:"fetch"}),(0,v.jsxs)("div",{children:["loading: ",t?"loading":"loaded"]}),(0,v.jsxs)("div",{children:["result: ",m]}),(0,v.jsxs)("div",{children:["tryCount: ",r]})]})}},38498:function(l,o,e){var p=e(78770);function a(i){if(Array.isArray(i))return p(i)}l.exports=a,l.exports.__esModule=!0,l.exports.default=l.exports},20698:function(l){function o(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}l.exports=o,l.exports.__esModule=!0,l.exports.default=l.exports},91162:function(l){function o(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}l.exports=o,l.exports.__esModule=!0,l.exports.default=l.exports},67825:function(l,o,e){var p=e(64382);function a(i,s){if(i==null)return{};var h=p(i,s),d,O;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);for(O=0;O<u.length;O++)d=u[O],!(s.indexOf(d)>=0)&&Object.prototype.propertyIsEnumerable.call(i,d)&&(h[d]=i[d])}return h}l.exports=a,l.exports.__esModule=!0,l.exports.default=l.exports},64382:function(l){function o(e,p){if(e==null)return{};var a={},i=Object.keys(e),s,h;for(h=0;h<i.length;h++)s=i[h],!(p.indexOf(s)>=0)&&(a[s]=e[s]);return a}l.exports=o,l.exports.__esModule=!0,l.exports.default=l.exports},15558:function(l,o,e){var p=e(38498),a=e(20698),i=e(31479),s=e(91162);function h(d){return p(d)||a(d)||i(d)||s()}l.exports=h,l.exports.__esModule=!0,l.exports.default=l.exports}}]);
