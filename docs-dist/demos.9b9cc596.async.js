(self.webpackChunkr_store=self.webpackChunkr_store||[]).push([[433],{86152:function(o,t,e){"use strict";e.r(t),e.d(t,{default:function(){return M}});var f=e(25298),l=e.n(f),i=e(17069),n=e.n(i),c=e(21742),u=e.n(c),O=e(83136),a=e.n(O),v=e(49900),C=e(75271),r=e(52676),p=function(d){u()(_,d);var E=a()(_);function _(){return l()(this,_),E.call(this,{state:{firstName:"",lastName:""}})}return n()(_,[{key:"updateFirstName",value:function(h){this.setState({firstName:h})}},{key:"updateLastName",value:function(h){this.setState({lastName:h})}}]),_}(v.Model),s=new p;function M(){var d=s.useGetState(),E=d.firstName;return(0,r.jsxs)("main",{style:{color:"#000"},children:[(0,r.jsxs)("label",{children:["First name",(0,r.jsx)("input",{onChange:function(m){return s.updateFirstName(m.currentTarget.value)},value:E})]}),(0,r.jsxs)("p",{children:["Hello, ",(0,r.jsxs)("strong",{children:[E,"!"]})]})]})}},37945:function(o,t,e){"use strict";e.r(t),e.d(t,{default:function(){return M}});var f=e(17069),l=e.n(f),i=e(25298),n=e.n(i),c=e(21742),u=e.n(c),O=e(83136),a=e.n(O),v=e(49900),C=e(75271),r=e(52676),p=function(d){u()(_,d);var E=a()(_);function _(){return n()(this,_),E.call(this,{state:{count:0,countSq:0},computed:[{keys:["count"],handler:function(h){var D=h.count;return{countSq:Math.pow(D,2)}}}]})}return l()(_)}(v.Model),s=new p;function M(){var d=s.useGetState(["count","countSq"]),E=d.count,_=d.countSq;return(0,r.jsxs)("div",{style:{color:"#000"},children:[(0,r.jsx)("button",{type:"button",onClick:function(){return s.setState({count:E+1})},children:"+"}),(0,r.jsx)("button",{type:"button",onClick:function(){return s.setState({count:E-1})},children:"-"}),(0,r.jsxs)("div",{children:["count: ",E]}),(0,r.jsxs)("div",{children:["countSq: ",_]})]})}},81459:function(o,t,e){"use strict";e.r(t);var f=e(82092),l=e.n(f),i=e(25298),n=e.n(i),c=e(17069),u=e.n(c),O=e(21742),a=e.n(O),v=e(83136),C=e.n(v),r=e(49900),p=e(75271),s=e(52676),M=function(K){a()(P,K);var R=C()(P);function P(S){var I;return n()(this,P),I=R.call(this,{state:{fishes:0}}),I.store=S,I}return u()(P,[{key:"addFish",value:function(){this.setState({fishes:this.getState().fishes+1})}},{key:"eatFish",value:function(){this.setState({fishes:this.getState().fishes-1})}}]),P}(r.Model),d=function(K){a()(P,K);var R=C()(P);function P(S){var I;return n()(this,P),I=R.call(this,{state:{bears:0}}),I.store=S,I}return u()(P,[{key:"addBear",value:function(){this.setState({bears:this.getState().bears+1})}}]),P}(r.Model),E=u()(function K(){n()(this,K),l()(this,"fishStore",void 0),l()(this,"bearStore",void 0),this.fishStore=new M(this),this.bearStore=new d(this)}),_=new E,m=function(){var R=_.bearStore.useGetState(),P=R.bears;return(0,s.jsxs)("div",{children:[(0,s.jsxs)("h2",{children:["Number of bears: ",P]}),(0,s.jsx)("button",{type:"button",onClick:function(){return _.bearStore.addBear()},children:"Add Bear"})]})},h=function(){var R=_.fishStore.useGetState(),P=R.fishes;return(0,s.jsxs)("div",{children:[(0,s.jsxs)("h2",{children:["Number of fishes: ",P]}),(0,s.jsx)("button",{type:"button",onClick:function(){return _.fishStore.addFish()},children:"Add Fish"})]})};function D(){return(0,s.jsxs)("div",{style:{color:"#000"},children:[(0,s.jsx)(m,{}),(0,s.jsx)(h,{})]})}t.default=D},56626:function(o,t,e){"use strict";e.r(t),e.d(t,{default:function(){return M}});var f=e(25298),l=e.n(f),i=e(17069),n=e.n(i),c=e(21742),u=e.n(c),O=e(83136),a=e.n(O),v=e(49900),C=e(75271),r=e(52676),p=function(d){u()(_,d);var E=a()(_);function _(){return l()(this,_),E.call(this,{state:{firstName:"",lastName:""}})}return n()(_,[{key:"updateFirstName",value:function(h){this.setState({firstName:h})}},{key:"updateLastName",value:function(h){this.setState({lastName:h})}}]),_}(v.Model),s=new p;function M(){var d=s.useGetState(["firstName","lastName"]),E=d.firstName;return(0,r.jsxs)("main",{style:{color:"#000"},children:[(0,r.jsxs)("label",{children:["First name",(0,r.jsx)("input",{onChange:function(m){return s.updateFirstName(m.currentTarget.value)},value:E})]}),(0,r.jsxs)("p",{children:["Hello, ",(0,r.jsxs)("strong",{children:[E,"!"]})]})]})}},49781:function(o,t,e){"use strict";e.r(t);var f=e(25298),l=e.n(f),i=e(17069),n=e.n(i),c=e(21742),u=e.n(c),O=e(83136),a=e.n(O),v=e(49900),C=e(15361),r=e(75271),p=e(52676),s=function(d){u()(_,d);var E=a()(_);function _(){return l()(this,_),E.call(this,{state:{value:""}})}return n()(_,[{key:"changeValue",value:function(h){this.setState({value:h})}}]),_}(v.Model),M=function(){var E=(0,C.useCreation)(function(){return new s},[]),_=E.useGetState(),m=_.value;return(0,p.jsxs)("div",{style:{color:"#000"},children:["userName:",(0,p.jsx)("input",{value:m,onInput:function(D){E.changeValue(D.target.value)}}),(0,p.jsxs)("div",{children:["userName: ",m]})]})};t.default=M},6952:function(o,t,e){"use strict";e.r(t),e.d(t,{CheckBoxGroupContext:function(){return g},CheckBoxGroupModel:function(){return x},useCheckBoxGroup:function(){return $}});var f=e(48305),l=e.n(f),i=e(26068),n=e.n(i),c=e(67825),u=e.n(c),O=e(15558),a=e.n(O),v=e(25298),C=e.n(v),r=e(17069),p=e.n(r),s=e(62657),M=e.n(s),d=e(21742),E=e.n(d),_=e(83136),m=e.n(_),h=e(82092),D=e.n(h),K=e(58899),R=e(49900),P=e(15361),S=e(80189),I=e(75271),T=e(52676),W=["value"],x=function(k){E()(j,k);var y=m()(j);function j(){var U;return C()(this,j),U=y.call(this,{autoInit:!1,state:{value:[],valueMap:{},keys:[],isCheckAll:!1,indeterminate:!1},computed:[{keys:["value"],handler:function(A){var L=A.value;return{valueMap:(0,S.arrayToObj)(L,void 0,function(){return!0})}}},{keys:["value","keys"],handler:function(A){var L=A.valueMap;return U.getCheckAllInfo(L)}}]}),D()(M()(U),"keys",[]),D()(M()(U),"timer",void 0),D()(M()(U),"props",{}),U.init(),U}return p()(j,[{key:"getCheckAllInfo",value:function(b){var A=this.getState(),L=A.valueMap,F=b||L,G=this.keys,N=!1,Z=!0;return G.forEach(function(V){var H=F[V];return H?N=!0:Z=!1,H}),Z&&(N=!1),{isCheckAll:Z,indeterminate:N}}},{key:"handleToggleCheckAll",value:function(){var b,A,L=this.getState(),F=L.isCheckAll,G;F?G=[]:G=a()(this.keys),"value"in this.props||this.setState({value:G}),(b=(A=this.props).onChange)===null||b===void 0||b.call(A,G)}},{key:"handleToggleCheck",value:function(b){var A,L,F=this.getState(),G=F.valueMap,N=F.value,Z=G[b],V=a()(N);Z?V=V.filter(function(H){return H!==b}):V.push(b),"value"in this.props||this.setState({value:V}),(A=(L=this.props).onChange)===null||A===void 0||A.call(L,V)}},{key:"registerKey",value:function(b){this.keys.includes(b)||this.keys.push(b),this.__updateKeys()}},{key:"setKeys",value:function(b){this.keys=b,this.__updateKeys()}},{key:"unRegisterKey",value:function(b){this.keys=this.keys.filter(function(A){return A!==b}),this.__updateKeys()}},{key:"__updateKeys",value:function(){var b=this;clearTimeout(this.timer),this.timer=setTimeout(function(){b.setState({keys:a()(b.keys)})},10)}}]),j}(R.Model);function $(k){var y="value"in k,j=(0,P.useCreation)(function(){return new x},[]);return j.props=k,(0,I.useMemo)(function(){y&&j.setState({value:k.value||[]},{silent:!0})},[k.value,j,y]),j}var g=(0,I.createContext)({model:new x,useGroupKeys:!1}),B=function(y){var j=$(y),U="keys"in y;return(0,I.useEffect)(function(){U&&j.setKeys(y.keys||[])},[y.keys,j,U]),(0,T.jsx)(g.Provider,{value:{model:j,useGroupKeys:U},children:y.children})},z=function(y){var j=y.value,U=u()(y,W),b=(0,I.useContext)(g),A=b.model,L=b.useGroupKeys,F=A.useGetState(),G=F.valueMap,N=G[j];return(0,I.useMemo)(function(){return L||A.registerKey(j),function(){L||A.unRegisterKey(j)}},[A,j,L]),(0,T.jsx)(K.Z,n()(n()({},U),{},{checked:N,onChange:function(){A.handleToggleCheck(j)}}))},X=function(y){var j=(0,I.useContext)(g),U=j.model,b=U.useGetState(),A=b.isCheckAll,L=b.indeterminate;return(0,T.jsx)(K.Z,n()(n()({},y),{},{checked:A,indeterminate:L,onChange:function(){U.handleToggleCheckAll()}}))};B.Checkbox=z,B.CheckboxAll=X,t.default=function(){var k=I.useState([]),y=l()(k,2),j=y[0],U=y[1];return(0,T.jsxs)("div",{style:{color:"#000"},children:[(0,T.jsxs)("div",{children:["\u9009\u4E2D\u7684\u503C\uFF1A",j.map(function(b){return(0,T.jsxs)("span",{children:[String(b),","]},String(b))})]}),(0,T.jsx)(B,{onChange:function(A){U(A),console.log(A)},children:(0,T.jsxs)("ul",{children:[(0,T.jsx)("li",{children:(0,T.jsx)(B.Checkbox,{style:{color:"#000"},value:"apple",children:"Apple"})}),(0,T.jsx)("li",{children:(0,T.jsx)(B.Checkbox,{style:{color:"#000"},value:"banana",children:"Banana"})}),(0,T.jsx)("li",{children:(0,T.jsx)(B.Checkbox,{style:{color:"#000"},value:"orange",children:"Orange"})}),(0,T.jsx)("li",{children:(0,T.jsx)(B.Checkbox,{style:{color:"#000"},value:"pear",children:"Pear"})})]})})]})}},35549:function(o,t,e){"use strict";e.r(t);var f=e(49900),l=e(75271),i=e(52676),n=function(){var u=(0,f.useModel)({state:{value:""},effects:{changeValue:function(C){u.setState({value:C})}}}),O=u.useGetState(),a=O.value;return(0,i.jsxs)("div",{style:{color:"#000"},children:["userName:",(0,i.jsx)("input",{value:a,onInput:function(C){u.getEffect("changeValue")(C.target.value)}}),(0,i.jsxs)("div",{children:["userName: ",a]})]})};t.default=n},90544:function(o,t,e){"use strict";e.r(t);var f=e(48305),l=e.n(f),i=e(49900),n=e(75271),c=e(52676),u=function(a){var v="value"in a,C=(0,i.useModel)({state:{value:""},effects:{changeValue:function(M){var d;v||C.setState({value:M}),(d=a.onChange)===null||d===void 0||d.call(a,M)}}});(0,n.useMemo)(function(){v&&C.setState({value:a.value},{silent:!0})},[a.value]);var r=C.useGetState(),p=r.value;return(0,c.jsx)("input",{value:p,onInput:function(M){C.getEffect("changeValue")(M.target.value)}})};t.default=function(){var O=n.useState(""),a=l()(O,2),v=a[0],C=a[1];return(0,c.jsxs)("div",{style:{color:"#000"},children:[(0,c.jsxs)("div",{children:["\u53D7\u63A7\u7EC4\u4EF6\uFF1A",(0,c.jsx)(u,{value:v,onChange:function(p){return C(p)}})]}),(0,c.jsxs)("div",{children:["\u975E\u53D7\u63A7\u7EC4\u4EF6\uFF1A",(0,c.jsx)(u,{})]})]})}},53312:function(o,t,e){"use strict";e.r(t),e.d(t,{default:function(){return r}});var f=e(90228),l=e.n(f),i=e(87999),n=e.n(i),c=e(48305),u=e.n(c),O=e(71676),a=e(75271),v=e(52676);function C(p){return new Promise(function(s){setTimeout(function(){s("result for ".concat(p))},Math.random()>.5?1e3:3e3)})}function r(){var p=a.useState(""),s=u()(p,2),M=s[0],d=s[1],E=a.useState(""),_=u()(E,2),m=_[0],h=_[1],D=a.useState(!1),K=u()(D,2),R=K[0],P=K[1],S=(0,O.Z)(function(){var T=n()(l()().mark(function W(x){var $;return l()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return P(!0),B.next=3,C(x);case 3:$=B.sent,h($),P(!1);case 6:case"end":return B.stop()}},W)}));return function(W){return T.apply(this,arguments)}}(),{wait:300}),I=S.run;return(0,a.useEffect)(function(){M&&I(M)},[M]),(0,v.jsxs)("div",{style:{color:"#000"},children:[(0,v.jsx)("input",{value:M,onChange:function(W){return d(W.target.value)}}),(0,v.jsx)("div",{children:R?"loading...":m})]})}},11470:function(o,t,e){"use strict";e.r(t),e.d(t,{default:function(){return C}});var f=e(90228),l=e.n(f),i=e(87999),n=e.n(i),c=e(49900),u=e(71676),O=e(75271),a=e(52676);function v(r,p){var s=0;return p&&(p.signal.onabort=function(){clearTimeout(s)}),new Promise(function(M){s=setTimeout(function(){M("result for ".concat(r))},Math.random()>.5?1e3:3e3)})}function C(){var r=(0,c.useModel)({state:{keyword:"",result:"",loading:!1},effects:{handleSearch:function(){var m=n()(l()().mark(function D(K){return l()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:r.asyncManager("fetchSearch",{loadingKey:"loading"}).exec(function(){var S=n()(l()().mark(function I(T){var W,x,$;return l()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return W=T.lastAbortController,x=T.abortController,W&&(console.log("abort last request"),W.abort()),B.next=4,v(K,x);case 4:return $=B.sent,B.abrupt("return",{result:$});case 6:case"end":return B.stop()}},I)}));return function(I){return S.apply(this,arguments)}}()).catch(function(){});case 1:case"end":return P.stop()}},D)}));function h(D){return m.apply(this,arguments)}return h}()}}),p=r.useGetState(),s=p.keyword,M=p.result,d=p.loading,E=(0,u.Z)(function(){var m=n()(l()().mark(function h(D){return l()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",r.getEffect("handleSearch")(D));case 1:case"end":return R.stop()}},h)}));return function(h){return m.apply(this,arguments)}}(),{wait:300}),_=E.run;return(0,O.useEffect)(function(){s&&_(s)},[s]),(0,a.jsxs)("div",{style:{color:"#000"},children:[(0,a.jsx)("input",{value:s,onChange:function(h){return r.setState({keyword:h.target.value})}}),(0,a.jsx)("div",{children:d?"loading...":M})]})}},27482:function(o,t,e){"use strict";e.r(t);var f=e(25298),l=e.n(f),i=e(17069),n=e.n(i),c=e(21742),u=e.n(c),O=e(83136),a=e.n(O),v=e(49900),C=e(47551),r=e(53874),p=e(75271),s=e(52676),M=function(d){u()(_,d);var E=a()(_);function _(){return l()(this,_),E.call(this,{state:{todos:[]}})}return n()(_,[{key:"addTodo",value:function(){this.setState((0,r.produce)(this.getState(),function(h){h.todos.push({id:Math.random().toString(36).slice(2),text:"new todo"})}))}},{key:"removeTodo",value:function(h){this.setState((0,r.produce)(this.getState(),function(D){D.todos=D.todos.filter(function(K){return K.id!==h})}))}},{key:"editTodo",value:function(h,D){this.setState((0,r.produce)(this.getState(),function(K){var R=K.todos.find(function(P){return P.id===h});R&&(R.text=D)}))}}]),_}(v.Model);t.default=function(){var d=(0,C.Z)(function(){return new M},[]),E=d.useGetState(),_=E.todos;return(0,s.jsxs)("div",{style:{color:"#000"},children:[(0,s.jsx)("button",{type:"button",onClick:function(){return d.addTodo()},children:"add todo"}),_.map(function(m){return(0,s.jsxs)("div",{children:[(0,s.jsx)("input",{value:m.text,onInput:function(D){d.editTodo(m.id,D.target.value)}}),(0,s.jsx)("button",{type:"button",onClick:function(){return d.removeTodo(m.id)},children:"remove"})]},m.id)})]})}},81919:function(o,t,e){"use strict";e.r(t);var f=e(90228),l=e.n(f),i=e(87999),n=e.n(i),c=e(48305),u=e.n(c),O=e(49900),a=e(75271),v=e(52676);function C(r){return new Promise(function(p,s){setTimeout(function(){r?p("success"):s(new Error("fail"))},1e3)})}t.default=function(){var r=a.useState(0),p=u()(r,2),s=p[0],M=p[1],d=(0,O.useModel)({state:{loading:!1,result:"",error:null},effects:{fetch:function(){var h=n()(l()().mark(function K(){return l()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:d.asyncManager("fetch",{loadingKey:"loading",errorKey:"error",config:{retryCount:3}}).exec(function(){var S=n()(l()().mark(function I(T,W){var x;return l()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return M(W),g.next=3,C(W===3);case 3:return x=g.sent,g.abrupt("return",{result:x});case 5:case"end":return g.stop()}},I)}));return function(I,T){return S.apply(this,arguments)}}());case 1:case"end":return P.stop()}},K)}));function D(){return h.apply(this,arguments)}return D}()}}),E=d.useGetState(),_=E.loading,m=E.result;return(0,v.jsxs)("div",{style:{color:"#000"},children:[(0,v.jsx)("button",{type:"button",onClick:function(){return d.getEffect("fetch")()},children:"fetch"}),(0,v.jsxs)("div",{children:["loading: ",_?"loading":"loaded"]}),(0,v.jsxs)("div",{children:["result: ",m]}),(0,v.jsxs)("div",{children:["tryCount: ",s]})]})}},38498:function(o,t,e){var f=e(78770);function l(i){if(Array.isArray(i))return f(i)}o.exports=l,o.exports.__esModule=!0,o.exports.default=o.exports},20698:function(o){function t(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}o.exports=t,o.exports.__esModule=!0,o.exports.default=o.exports},91162:function(o){function t(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}o.exports=t,o.exports.__esModule=!0,o.exports.default=o.exports},67825:function(o,t,e){var f=e(64382);function l(i,n){if(i==null)return{};var c=f(i,n),u,O;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(O=0;O<a.length;O++)u=a[O],!(n.indexOf(u)>=0)&&Object.prototype.propertyIsEnumerable.call(i,u)&&(c[u]=i[u])}return c}o.exports=l,o.exports.__esModule=!0,o.exports.default=o.exports},64382:function(o){function t(e,f){if(e==null)return{};var l={},i=Object.keys(e),n,c;for(c=0;c<i.length;c++)n=i[c],!(f.indexOf(n)>=0)&&(l[n]=e[n]);return l}o.exports=t,o.exports.__esModule=!0,o.exports.default=o.exports},15558:function(o,t,e){var f=e(38498),l=e(20698),i=e(31479),n=e(91162);function c(u){return f(u)||l(u)||i(u)||n()}o.exports=c,o.exports.__esModule=!0,o.exports.default=o.exports}}]);
